<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>File: window_ext.js [RDoc Documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <h1 class='name'>window_ext.js</h1>
        <div class='paths'>
          files/javascripts/window_ext.js
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>Mon Jan 24 10:47:09 -0800 2011</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            // Copyright &#169; 2006 SÃ©bastien Gruhier (<a
            href="http://xilinus.com">xilinus.com</a>, <a
            href="http://itseb.com">itseb.com</a>) // YOU MUST INCLUDE window.js BEFORE
            // // Object to store hide/show windows status in a cookie // Just add at
            the end of your HTML file this javascript line: WindowStore.init()
            WindowStore = {
            </p>
            <pre>doSetCookie: false,&#x000A;cookieName:  &quot;__window_store__&quot;,&#x000A;expired:     null,&#x000A;&#x000A;// Init function with two optional parameters&#x000A;// - cookieName (default = __window_store__)&#x000A;// - expiration date (default 3 years from now)&#x000A;init: function(cookieName, expired) {&#x000A;  WindowStore.cookieName = cookieName || WindowStore.cookieName&#x000A;&#x000A;  if (! expired) {&#x000A;    var today = new Date();&#x000A;    today.setYear(today.getYear()+1903);&#x000A;    WindowStore.expired = today;&#x000A;  }&#x000A;  else&#x000A;    WindowStore.expired = expired;&#x000A;&#x000A;  Windows.windows.each(function(win) {&#x000A;    win.setCookie(win.getId(), WindowStore.expired);&#x000A;  });&#x000A;&#x000A;  // Create observer on show/hide events&#x000A;  var myObserver = {&#x000A;      onShow: function(eventName, win) {&#x000A;        WindowStore._saveCookie();&#x000A;      },&#x000A;&#x000A;      onClose: function(eventName, win) {&#x000A;        WindowStore._saveCookie();&#x000A;        },&#x000A;&#x000A;      onHide: function(eventName, win) {&#x000A;        WindowStore._saveCookie();&#x000A;      }&#x000A;  }&#x000A;  Windows.addObserver(myObserver);&#x000A;&#x000A;  WindowStore._restoreWindows();&#x000A;  WindowStore._saveCookie();&#x000A;},&#x000A;&#x000A;show: function(win) {&#x000A;  eval(&quot;var cookie = &quot; + WindowUtilities.getCookie(WindowStore.cookieName));&#x000A;  if (cookie != null) {&#x000A;    if (cookie[win.getId()])&#x000A;      win.show();&#x000A;  }&#x000A;  else&#x000A;    win.show();&#x000A;},&#x000A;&#x000A;// Function to store windows show/hide status in a cookie&#x000A;_saveCookie: function() {&#x000A;  if (!doSetCookie)&#x000A;    return;&#x000A;&#x000A;  var cookieValue = &quot;{&quot;;&#x000A;  Windows.windows.each(function(win) {&#x000A;    if (cookieValue != &quot;{&quot;)&#x000A;      cookieValue += &quot;,&quot;&#x000A;    cookieValue += win.getId() + &quot;: &quot; + win.isVisible();&#x000A;  });&#x000A;  cookieValue += &quot;}&quot;&#x000A;&#x000A;  WindowUtilities.setCookie(cookieValue, [WindowStore.cookieName, WindowStore.expired]);&#x000A;},&#x000A;&#x000A;// Function to restore windows show/hide status from a cookie if exists&#x000A;_restoreWindows: function() {&#x000A;  eval(&quot;var cookie = &quot; + WindowUtilities.getCookie(WindowStore.cookieName));&#x000A;  if (cookie != null) {&#x000A;    doSetCookie = false;&#x000A;    Windows.windows.each(function(win) {&#x000A;      if (cookie[win.getId()])&#x000A;        win.show();&#x000A;    });&#x000A;  }&#x000A;  doSetCookie = true;&#x000A;}</pre>
            <p>
            }
            </p>
            <p>
            // Object to set a close key an all windows WindowCloseKey = {
            </p>
            <pre>keyCode: Event.KEY_ESC,&#x000A;&#x000A;init: function(keyCode) {&#x000A;  if (keyCode)&#x000A;    WindowCloseKey.keyCode = keyCode;&#x000A;&#x000A;  Event.observe(document, 'keydown', this._closeCurrentWindow.bindAsEventListener(this));&#x000A;},&#x000A;&#x000A;_closeCurrentWindow: function(event) {&#x000A;  var e = event || window.event&#x000A;      var characterCode = e.which || e.keyCode;&#x000A;&#x000A;      // Check if there is a top window (it means it's an URL content)&#x000A;      var win = top.Windows.focusedWindow;&#x000A;  if (characterCode == WindowCloseKey.keyCode &amp;&amp; win) {&#x000A;    if (win.cancelCallback)&#x000A;      top.Dialog.cancelCallback();&#x000A;    else if (win.okCallback)&#x000A;      top.Dialog.okCallback();&#x000A;    else&#x000A;      top.Windows.close(top.Windows.focusedWindow.getId());&#x000A;  }&#x000A;}</pre>
            <p>
            }
            </p>
          </div>
          <div id='section'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
